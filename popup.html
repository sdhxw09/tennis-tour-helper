<style>
    body {
        width:700px;
        height: 400px;
        overflow-x:hidden;
    }
</style>

<link href="css/demo_table.css" rel="stylesheet" type="text/css"/>
<link href="css/jquery.dataTables.css" rel="stylesheet" type="text/css"/>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="jquery.dataTables.min.js"></script>

<script>
    var meboss = {
        refreshRanking: function(ageGroup, rankingPopupData) {
            var myDataTable = $('#rankingB14').dataTable();
            if (ageGroup == 'B12') {
                myDataTable = $('#rankingB12').dataTable();
            }

            myDataTable.fnClearTable();
            myDataTable.fnAddData(rankingPopupData);
        },

        refreshApplicant: function(applicantPopupData) {
            var myDataTable = $('#applicant').dataTable();

            myDataTable.fnClearTable();
            myDataTable.fnAddData(applicantPopupData);
        }
    };

    $(document).ready(function() {
        var dataTableOpts = {
                "aoColumns": [
                    { "sTitle": "Name" },
                    { "sTitle": "Ranking" },
                    { "sTitle": "State" }
                ],
                "bPaginate": false,
                "bLengthChange": false,
                "bFilter": true,
                "bSort": false,
                "bInfo": false,
                "bJQueryUI": true,
                "bAutoWidth": false
        };

        $('#tabs').tabs();
        $(':button').button();

        var b14Table = $('#rankingB14').dataTable(dataTableOpts);
        var b14Data = JSON.parse(localStorage.getItem('B14'));
        if (b14Data) {
            b14Table.fnAddData(b14Data);
        }

        var b12Table = $('#rankingB12').dataTable(dataTableOpts);
        var b12Data = JSON.parse(localStorage.getItem('B12'));
        if (b12Data) {
            b12Table.fnAddData(b12Data);
        }

        $('#applicant').dataTable(dataTableOpts);

        $('#rankingB14Button').click(function(tab) {
            console.log('Refresh button on B14 clicked on tab ...');
            chrome.extension.getBackgroundPage().meboss.refreshB14Ranking();
        });

        $('#rankingB12Button').click(function(tab) {
            console.log('Refresh button on B12 clicked on tab ...');
            chrome.extension.getBackgroundPage().meboss.refreshB12Ranking();
        });

        $('#applicantButton').click(function() {
            console.log('Set Ranking button clicked ...');
            chrome.extension.getBackgroundPage().meboss.setApplicantRanking();
        });
    });

</script>


<div id="tabs">
    <ul>
        <li><a href="#tabs-1">B14 Ranking</a></li>
        <li><a href="#tabs-2">B12 Ranking</a></li>
        <li><a href="#tabs-3">Applicants</a></li>
    </ul>
    <div id="tabs-1">
        <div>
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="rankingB14"></table>
        </div>
        <div align="right">
            <button id="rankingB14Button">Refresh</button>
        </div>
    </div>

    <div id="tabs-2">
        <div>
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="rankingB12"></table>
        </div>
        <div align="right">
            <button id="rankingB12Button">Refresh</button>
        </div>
    </div>

    <div id="tabs-3">
        <div>
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="applicant"></table>
        </div>
        <div align="right"><button id="applicantButton">Set Ranking</button></div>
    </div>
</div>
