<style>
    body {
        width:750px;
        height: 450px;
        overflow-x:hidden;
    }
</style>

<link href="css/demo_table.css" rel="stylesheet" type="text/css"/>
<link href="css/jquery.dataTables.css" rel="stylesheet" type="text/css"/>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="jquery.dataTables.min.js"></script>

<script>
    var meboss = {
        refreshRanking: function(ageGroup, rankingPopupData) {
            var myDataTable = $('#currentRanking').dataTable();
            if (ageGroup == 'L') {
                myDataTable = $('#lowerGroupRranking').dataTable();
            }

            myDataTable.fnClearTable();
            myDataTable.fnAddData(rankingPopupData);
        },

        refreshApplicant: function(applicantPopupData) {
            var myDataTable = $('#applicant').dataTable();

            myDataTable.fnClearTable();
            myDataTable.fnAddData(applicantPopupData);
            $('#totalRecord').html(myDataTable.fnSettings().fnRecordsTotal());
        }
    };

    $(document).ready(function() {
        var rankingTableOpt = {
                "aoColumns": [
                    { "sTitle": "Name" },
                    { "sTitle": "Ranking" },
                    { "sTitle": "State" }
                ],
                "bPaginate": false,
                "bLengthChange": false,
                "bFilter": true,
                "bSort": false,
                "bInfo": false,
                "bAutoWidth": false
        };

        var applicantTableOpt = {
            "aoColumns": [
                { "sTitle": "Name" },
                { "sTitle": "B14" },
                { "sTitle": "B12" },
                { "sTitle": "State" }
            ],
            "aaSorting": [[1,'asc'], [2,'asc']],
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": true,
            "bInfo": false
        };

        $('#tabs').tabs();
        $(':button').button();

        var currentTable = $('#currentRanking').dataTable(rankingTableOpt);
        var currentData = JSON.parse(localStorage.getItem('C'));
        if (currentData) {
            currentTable.fnAddData(currentData);
        }

        var lowerTable = $('#lowerGroupRranking').dataTable(rankingTableOpt);
        var lowerData = JSON.parse(localStorage.getItem('L'));
        if (lowerData) {
            lowerTable.fnAddData(lowerData);
        }

        $('#applicant').dataTable(applicantTableOpt);

        $('#currentRankingButton').click(function(tab) {
            console.log('Refresh button on B14 clicked on tab ...');
            chrome.extension.getBackgroundPage().meboss.refreshCurrentRanking();
        });

        $('#lowerRankingButton').click(function(tab) {
            console.log('Refresh button on B12 clicked on tab ...');
            chrome.extension.getBackgroundPage().meboss.refreshLowerGroupRanking();
        });

        $('#applicantButton').click(function() {
            console.log('Set Ranking button clicked ...');
            chrome.extension.getBackgroundPage().meboss.setApplicantRanking();
        });
    });

</script>


<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Applicants</a></li>
        <li><a href="#tabs-2">B14 Ranking</a></li>
        <li><a href="#tabs-3">B12 Ranking</a></li>
    </ul>
    <div id="tabs-2">
        <div>
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="currentRanking"></table>
        </div>
        <div align="right">
            <button id="currentRankingButton">Refresh</button>
        </div>
    </div>

    <div id="tabs-3">
        <div>
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="lowerGroupRranking"></table>
        </div>
        <div align="right">
            <button id="lowerRankingButton">Refresh</button>
        </div>
    </div>

    <div id="tabs-1">
        <div>
            <table cellpadding="0" cellspacing="0" border="0" class="display" id="applicant"></table>
        </div>
        <div align="left" id="totalRecord">0</div>
        <div align="right"><button id="applicantButton">Set Ranking</button></div>
    </div>
</div>
